# ========================================
# Blastoise API Environment Configuration
# ========================================
# Copy this file to .env and fill in your values
# For production deployment, see README.md deployment section

# ========================================
# Database Configuration (PostgreSQL)
# ========================================
# Local development (Docker Compose)
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=postgres
DATABASE_NAME=brewery_tracker

# Production (use managed PostgreSQL service)
# DATABASE_HOST=your-db-host.com
# DATABASE_PORT=5432
# DATABASE_USERNAME=your-username
# DATABASE_PASSWORD=your-secure-password
# DATABASE_NAME=brewery_tracker
# DATABASE_SSL=true

# ========================================
# JWT Authentication Configuration
# ========================================
# Secret key for signing JWT tokens
# IMPORTANT: Generate a secure secret for production!
# Generate with: openssl rand -base64 32
JWT_SECRET=your-secret-key-min-32-characters-change-in-prod

# Access token expiration (short-lived)
JWT_ACCESS_EXPIRATION=15m

# Refresh token expiration (long-lived, stored in httpOnly cookie)
JWT_REFRESH_EXPIRATION=7d

# ========================================
# Redis Configuration
# ========================================
# Local development (Docker Compose)
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=  # Optional, uncomment if password is set

# Production (Redis Cloud or Upstash)
# REDIS_HOST=your-redis-instance.redis.cloud
# REDIS_PORT=16379
# REDIS_PASSWORD=your-redis-password

# ========================================
# Server Configuration
# ========================================
PORT=3000
HOST=localhost
NODE_ENV=development

# ========================================
# Security & CORS
# ========================================
# Comma-separated list of allowed origins
# Development: Include both web and mobile app URLs
CORS_ORIGINS=http://localhost:4200,http://localhost:4201

# Production: Replace with your actual domains
# CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com,https://app.yourdomain.com

# Note: Railway (*.up.railway.app) and Vercel (*.vercel.app) preview deployments
# are automatically allowed without needing to add them here.

# ========================================
# Monitoring & Observability (Optional)
# ========================================
# Sentry DSN for error tracking
# Get this from: https://sentry.io/settings/projects/your-project/keys/
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Sentry environment name
# SENTRY_ENVIRONMENT=development

# ========================================
# Rate Limiting (Optional - defaults provided)
# ========================================
# Requests per minute for authenticated users
# RATE_LIMIT_AUTHENTICATED=100

# Requests per minute for anonymous users
# RATE_LIMIT_ANONYMOUS=20

# ========================================
# Caching Configuration (Optional - defaults provided)
# ========================================
# Cache TTL in seconds
# CACHE_TTL_VENUES=300          # 5 minutes for venue details
# CACHE_TTL_NEARBY=60           # 1 minute for nearby venue searches
# CACHE_TTL_SEARCH=120          # 2 minutes for text searches
# CACHE_TTL_SHARED=600          # 10 minutes for shared visits

# ========================================
# Email Configuration (for Password Reset)
# ========================================
# Email provider: console (dev), smtp, sendgrid, ses
EMAIL_PROVIDER=console

# Email sender address
EMAIL_FROM=noreply@blastoise.app

# App name (used in email templates)
APP_NAME=Blastoise

# App base URL (for password reset links)
APP_BASE_URL=http://localhost:4200

# SMTP Configuration (if EMAIL_PROVIDER=smtp)
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-smtp-user
# SMTP_PASS=your-smtp-password

# SendGrid Configuration (if EMAIL_PROVIDER=sendgrid)
# SENDGRID_API_KEY=your-sendgrid-api-key

# AWS SES Configuration (if EMAIL_PROVIDER=ses)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# ========================================
# Notification Configuration (Optional)
# ========================================
# Email service configuration for weekly summaries
# WEB_APP_URL=http://localhost:4200

# ========================================
# Feature Flags (Optional)
# ========================================
# Enable/disable specific features
# ENABLE_NOTIFICATIONS=true
# ENABLE_SHARING=true
# ENABLE_WEEKLY_SUMMARIES=false

# ========================================
# Google Timeline Import Configuration (Optional)
# ========================================
# Google Places API key for Tier 3 verification (optional)
# Used to verify low-confidence matches from Overpass API or Open Brewery DB
# Get your API key from: https://console.cloud.google.com/google/maps-apis/credentials
# Enable "Places API" in your Google Cloud project
# Cost: $0.017 per request (only used for verification, not discovery)
# If not provided, system will skip Tier 3 verification
# GOOGLE_PLACES_API_KEY=your-google-places-api-key-here

# Enable guest mode (anonymous usage without account)
# When enabled, users can use the app without signing in (mobile only)
ENABLE_GUEST_MODE=false

# Enable magic link authentication (passwordless login via email)
# Requires EMAIL_PROVIDER to be configured
ENABLE_MAGIC_LINK=false
