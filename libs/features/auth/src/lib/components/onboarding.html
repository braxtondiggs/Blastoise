<!-- Onboarding Template with DaisyUI -->
<div class="flex items-center justify-center min-h-screen p-4 bg-base-100">
  <div class="w-full max-w-lg shadow-xl card bg-base-200">
    <div class="card-body">
      <!-- Progress Indicator with Dots -->
      <div
        class="flex justify-center gap-2 mb-6"
        role="progressbar"
        aria-valuenow="{{currentStep() + 1}}"
        aria-valuemin="1"
        aria-valuemax="{{totalSteps}}"
        aria-label="Onboarding progress: Step {{currentStep() + 1}} of {{totalSteps}}"
      >
        @for (step of steps; track $index) {
        <div
          class="w-3 h-3 rounded-full transition-colors duration-200 {{$index === currentStep() ? 'bg-primary' : $index < currentStep() ? 'bg-primary/50' : 'bg-base-300'}}"
          [attr.aria-label]="$index === currentStep() ? 'Current step: ' + step.title : $index < currentStep() ? 'Completed step: ' + step.title : 'Upcoming step: ' + step.title"
        ></div>
        }
      </div>

      <!-- Step Content -->
      <h2 class="justify-center mb-4 text-2xl font-bold text-center card-title">
        {{ steps[currentStep()].title }}
      </h2>
      <p class="mb-8 text-center text-base-content/80">{{ steps[currentStep()].content }}</p>

      <!-- Show auth options on final step -->
      @if (currentStep() === totalSteps - 1) {
      <div class="mb-6 space-y-3">
        <button
          type="button"
          class="w-full btn btn-primary"
          (click)="onSignIn()"
          aria-label="Sign in to your account"
        >
          Sign In
        </button>

        <button
          type="button"
          class="w-full btn btn-outline"
          (click)="onContinueAsGuest()"
          aria-label="Continue using the app without signing in"
        >
          Continue as Guest
        </button>
      </div>
      }

      <!-- Navigation Buttons -->
      <div class="flex items-center justify-between mt-4">
        <!-- Show Back if not first step, else show Skip -->
        @if (currentStep() > 0) {
        <button
          type="button"
          class="btn btn-ghost"
          (click)="previousStep()"
          aria-label="Go back to previous step"
        >
          Back
        </button>
        } @else {
        <button type="button" class="btn btn-ghost" (click)="skip()" aria-label="Skip onboarding">
          Skip
        </button>
        }

        <!-- Show Next if not last step, else show Get Started -->
        @if (currentStep() < totalSteps - 1) {
        <button
          type="button"
          class="btn btn-primary"
          (click)="nextStep()"
          aria-label="Continue to next step"
        >
          Next
        </button>
        }
      </div>

      <!-- Step Counter -->
      <div class="mt-4 text-sm text-center text-base-content/50">
        Step {{ currentStep() + 1 }} of {{ totalSteps }}
      </div>
    </div>
  </div>
</div>
